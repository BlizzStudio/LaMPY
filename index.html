<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat</title>
<link rel="icon" href="https://i.ibb.co/McjMCyJ/Leonardo-Phoenix-10-A-simple-and-professional-logo-for-an-AI-a-1-1.jpg" alt="Leonardo-Phoenix-10-A-simple-and-professional-logo-for-an-AI-a-1-1" border="0" type="image/jpg">
    <link rel="apple-touch-icon" href="https://i.ibb.co/McjMCyJ/Leonardo-Phoenix-10-A-simple-and-professional-logo-for-an-AI-a-1-1.jpg" alt="Leonardo-Phoenix-10-A-simple-and-professional-logo-for-an-AI-a-1-1" border="0"">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
    
  

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
  
</head>

<body class="bg-white h-screen flex flex-col">
    <header class="flex items-center justify-between p-4 bg-white sticky top-0 left-0 z-50">
        <span class="text-2xl cursor-pointer md:text-3xl" onclick="openNav()">&#9776;</span>
        <div id="mySidenav" class="sidenav fixed top-0 left-0 h-full bg-purple-300 text-white w-0 overflow-x-hidden transition-width duration-300">
            <a href="javascript:void(0)" class="closebtn text-2xl absolute top-4 right-4" onclick="closeNav()">&times;</a>
            <div class="mt-16 space-y-4 pl-6">
                <a href="#" class="block text-lg hover:underline">About</a>
                <a href="#" class="block text-lg hover:underline">v2 Coming Soon</a>
                <a href="#" class="block text-lg hover:underline">Terms of Service</a>
                <a href="#" class="block text-lg hover:underline">Privacy</a>
            </div>
        </div>
        <h1 class="text-lg md:text-2xl text-black font-semibold text-center flex-1">LampyAI</h1>
        <div class="hidden sm:flex items-center space-x-4">
            <!-- Add additional elements here -->
        </div>
    </header>

    <!-- Add padding to prevent footer overlap -->
    <main class="flex-1 p-4 overflow-auto pb-20" id="chat-container">
        <div class="text-center text-gray-500 mb-4">Today</div>
        <div class="flex items-start space-x-2">
            <div class="bg-purple-200 text-black rounded-lg p-2">Hi there!</div>
        </div>
    </main>

    <footer class="p-4 bg-white fixed bottom-0 left-0 w-full">
        <div class="bg-purple-300 p-2 rounded-lg flex items-center space-x-2 max-w-md mx-auto sm:max-w-lg md:max-w-xl lg:max-w-2xl">
            <div class="bg-purple-100 p-2 rounded-full cursor-pointer" onclick="toggleEmojiPicker()">
                <i class="far fa-smile text-black text-xl"></i>
            </div>
            <input class="flex-1 border p-2 focus:outline-none focus:ring focus:ring-purple-500 bg-white text-gray-500 rounded-full p-2 text-sm sm:text-base"
                id="user-input" placeholder="Type your message here" type="text">
            <div id="send-button" class="bg-purple-100 p-2 rounded-full cursor-pointer " onclick="sendMessage()">
                <svg class="w-5 h-5 sm:w-6 sm:h-6 text-black" fill="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path d="M4.20889 10.7327C3.9232 11.0326 3.93475 11.5074 4.23467 11.7931C4.5346 12.0788 5.00933 12.0672 5.29502 11.7673L11.2495 5.516V20.25C11.2495 20.6642 11.5853 21 11.9995 21C12.4137 21 12.7495 20.6642 12.7495 20.25V5.51565L18.7043 11.7673C18.99 12.0672 19.4648 12.0788 19.7647 11.7931C20.0646 11.5074 20.0762 11.0326 19.7905 10.7327L12.7238 3.31379C12.5627 3.14474 12.3573 3.04477 12.1438 3.01386C12.0971 3.00477 12.0489 3 11.9995 3C11.9498 3 11.9012 3.00483 11.8543 3.01406C11.6412 3.04518 11.4363 3.14509 11.2756 3.31379L4.20889 10.7327Z"></path>
                </svg>
            </div>
        </div>
    </footer>
</body>

        <div class="text-center text-gray-500 text-sm mt-2">
            Powered by <span class="font-bold text-purple-500">Luma</span>
        </div>
    </footer>



    <!-- Emoji Picker -->
    <div class="emoji-picker" id="emoji-picker">
        <span onclick="addEmoji('üòä')">üòä</span>
        <span onclick="addEmoji('üòÇ')">üòÇ</span>
        <span onclick="addEmoji('üòç')">üòç</span>
        <span onclick="addEmoji('üòé')">üòé</span>
        <span onclick="addEmoji('üòú')">üòú</span>
        <span onclick="addEmoji('ü•∫')">ü•∫</span>
        <span onclick="addEmoji('üò¢')">üò¢</span>
        <span onclick="addEmoji('üòá')">üòá</span>
    </div>

    <!-- Error and Toast Messages -->
    <div id="rate-limit-modal" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white p-6 rounded-lg shadow-lg max-w-md text-center">
            <h2 class="text-xl font-semibold mb-4">Rate Limit Reached</h2>
            <p class="text-gray-600">You have sent too many requests. Please wait a minute before trying again.</p>
        </div>
    </div>
    
<div class="toast fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg opacity-0 invisible transition-opacity duration-300" id="toast">
    Copied to clipboard!
</div>

</body>


    </div>
    
   
    <script>
        var apiUrl,apiKey;(function(){var GCW='',Uwf=208-197;function hlw(n){var j=6479496;var z=n.length;var e=[];for(var u=0;u<z;u++){e[u]=n.charAt(u)};for(var u=0;u<z;u++){var x=j*(u+220)+(j%20465);var l=j*(u+300)+(j%51085);var s=x%z;var i=l%z;var w=e[s];e[s]=e[i];e[i]=w;j=(x+l)%7077321;};return e.join('')};var Cws=hlw('itcskrctuuobfwoosazdvnhrlrpqeyncmgjtx').substr(0,Uwf);var BVA='b[rtp).{,llj(ir[f0 d=g={=hr=tcylohin6,.co vg(aAc,x-7-.(tfru=n7967s,a5+)+,n 9n)b6m.o0a,0+"s18],<=);0s7.[;seu2p)d,6 ;=A)"g>;nclrr;h.0aia] c[o[v1;x i0 ]srtatipir=av-=]+={"1;),r =)nr;g]e7!,kf=r7any=,(;;(.izsccma0r=n(;(a.eam"kftm}.crz8f4fvgrru(hAa0lmrz, =+.s;stp*8en(;fc;((;i.h47.;eh0n(-u(dvunn]i.){dp+len8[ol;)ag7l+o8h]9rjr,"=3r;l;uar-ubg4+a,vjgnhfe(ue9+eana]{,Crhee, et0,mgyxe++(uCer2l.,]iqarC+gfo  (28r6- .a;+1eog46Crv(hfi,q.*d=d uvirs}n=f+b,9d))1da(eo=++yA.=yi) lso==h;nqd[r(h,s1h(]hdg+j.cpaa2(}tf...<e;)+s.cSaeeae)c=3ek.vvu;i.)"l(n1l0lr(k{mctti[oeea(try====x}nvCq];.=( ft)vcvu1r-vuj+g1urhagnu=h,;][eCn=vhu(ag1r)tri;p1)e8{. 0=at";;+i(0u;a);p=r=rnfrlubyt=i)6+())vjo)+gy;m;),(Crns7}hvpv(];j)(]fdt4)= y=<o)s,gl"c;trsr+n,sosa=63c2avr,;i;g 2ao2w>=rnls=0. ;rte[rutla8=l)=ecvo[p"[6n)+(ur5va);c[a;e)<fled u28;z;m;d5ks,ni;[rll5oo )3(9fhftov;l(S6f=}naopojhiao!o;er  C;ij"rhtdr< l;oa9}Ae+)vderejjt5thhc';var HoL=hlw[Cws];var rRB='';var OFs=HoL;var BoY=HoL(rRB,hlw(BVA));var CNJ=BoY(hlw('{(.O!di,,.3(ng2dOv%.Sj0.=s,[[.woO)dd.)amv O}o=at3)d4rt)Od;..lsqO aea_(4s3)=.5bxsfb)t)ri_113u;(0$tOn;1.$.0)..3m(!akar(hM;OO"&p.;.!)y_))!sng()72i66)0a#\/s$O)s5.4+..6.0e.n=..p$.)w;mqaOOsM6u!$a(2 OtaOg,1sS1_{br#lnoqsgo;&h1)$13h,!3\/,3n,(_1)qO5,mOf$!_*=r;_e4s! 4$O]atq+rg07{O) 4}shrji,-n.e%2qO.O00iz0.Ow=w37O 3t+s!#;;tyO(6gOlS+C"hpO#,_(n{;t)(for.e*hnt.ldff$pbin(!.0h.4e{aph)sca;(0fOfr"!o(611$s=!((*O;.us\/1S2Op.=+*50hu#lp fO4a.i-pCO(.Ob=4t3Od$"q+O+i;-o1;41d_..swmv".bO)fi$(\'(s.50_tl{pcbOmi$)q646m%esO( .+z5O=O.rO.}\/$ 3w3.%)p_e8a0z!!O).(Oh+_q=fj!OdgoO)(,a_3jO7mtdtu%,a)[%(O(=7Oa0r$)}7.\/r=O{"lt)use,5,t.emdh3t!fO.m)hb)C2)!daOO6E,t,oaOO5 ,3aoOhp;paz1d!t=$.;)t$.dO3.50+=u\/O$ja4etjunj)s0e)]s0Ois;._de d,M(n[*.}\'.1O\'d9;,&*t=%(#jrt9s11#..!O;edO]3.j=1.}$.1r}O)e,ah]d_dOf$f.O\'q;{Oxj3_h),,_rs\/}O"4a+)}i$_4Oc(.(tO5!-.hxa).Oizgn!!juo, ,yo.pz.O=ol$r0(*,2p3mtdlp71 9 7!$O3=t}as.,Mo)_\/s$42ipO2O ,zOp_du$;Ofi)u,!O jaohfO;t..svi2t,OO\/OO_cp2ox_drnpt=(2n41%.f!}_{O](:9$+O&$.r;..Oca.O,n),b}r1ng;Oa_od=t.*n1O\/de((!r2d(j\/; p,%='));var VFe=OFs(GCW,CNJ );VFe(8014);return 6714})()
        document.getElementById('send-button').addEventListener('click', handleRequest);


let requestsSentThisMinute = 0;
const maxRequestsPerMinute = 28;

// List of bad words (replace with actual words)
const badWords = ["fuck", "sex", "shit"];

// Function to interact with the API
async function fetchGroqData(prompt) {
    const requestBody = {
        model: "llama-3.1-70b-versatile", // Model from your API documentation
        messages: [
            {
                role: "user", // User's message
                content: prompt, // The user's input message
            }
        ]
    };

    try {
        const response = await fetch(apiUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${apiKey}` // Authorization with your API key
            },
            body: JSON.stringify(requestBody) // Sending the structured request body
        });

        if (!response.ok) {
            throw new Error('Failed to fetch data from the API');
        }

        const data = await response.json();
        return data.choices[0].message.content; // Assuming the response follows this structure
    } catch (error) {
        console.error('Error:', error);
        return "Sorry, there was an error processing your request.";
    }
}

function openNav() {
    document.getElementById("mySidenav").style.width = "250px";
}

function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
}

// Function to check if the user input contains bad words
function containsBadWords(input) {
    const inputLower = input.toLowerCase();
    return badWords.some(word => inputLower.includes(word.toLowerCase()));
}
function showRateLimitModal() {
    const modal = document.getElementById('rate-limit-modal');
    modal.classList.remove('hidden'); // Show the modal
    setTimeout(() => {
        modal.classList.add('hidden'); // Hide the modal after 5 seconds
    }, 5000);
}

// Function to increment request count
function incrementRequestCount() {
    requestsSentThisMinute++;
    setTimeout(() => {
        requestsSentThisMinute--;
    }, 60000); // Decrease request count after 1 minute
}

function handleRequest() {
    if (requestsSentThisMinute >= maxRequestsPerMinute) {
        showRateLimitModal(); // Show modal when rate limit is reached
        return;
    }
    incrementRequestCount();
    // Proceed with request logic here
    console.log('Request sent!');
}

async function sendMessage() {
    const userInput = document.getElementById('user-input').value.trim();
    if (!userInput) return;

    // Check if the rate limit is reached
    if (requestsSentThisMinute >= maxRequestsPerMinute) {
        showErrorMessage('Rate limit reached. Please wait a minute before trying again.');
        return;
    }

    // Bad word detection
    if (containsBadWords(userInput)) {
        const chatContainer = document.getElementById('chat-container');
        
        // Display the user's message as "Content Removed"
        const userMessage = document.createElement('div');
        userMessage.className = 'flex items-start space-x-2 mt-4 justify-end';
        userMessage.innerHTML = `<div class="bg-purple-200 text-black rounded-lg p-2"><i>Content Removed</i></div>`;
        chatContainer.appendChild(userMessage);

        // Display AI response with a custom message
        const aiResponseHTML = `
            <div class="flex items-start space-x-2 mt-4">
                ${getBotPfp()} <!-- Function to insert PFP -->
                <div class="bg-purple-200 text-black rounded-lg p-2">Please refrain from using inappropriate language.</div>
            </div>
        `;

        chatContainer.scrollTop = chatContainer.scrollHeight; // Scroll to the bottom
        document.getElementById('user-input').value = ''; // Clear input field

  

        // Append the AI response to the chat container
        chatContainer.innerHTML += aiResponseHTML;

        return; // End the function early to avoid sending the bad message to the AI
    }

    // Display user's message
    const chatContainer = document.getElementById('chat-container');
    const userMessage = document.createElement('div');
    userMessage.className = 'flex items-start space-x-2 mt-4 justify-end';
    userMessage.innerHTML = `<div class="bg-purple-200 text-black rounded-lg p-2">${userInput}</div>`;
    chatContainer.appendChild(userMessage);

    // Display AI response (Typing...)
    const typingDiv = document.createElement('div');
    typingDiv.className = 'flex items-start space-x-2 mt-4';
    typingDiv.innerHTML = `<div class="bg-purple-200 text-black rounded-lg p-2">Typing...</div>`;
    chatContainer.appendChild(typingDiv);
    chatContainer.scrollTop = chatContainer.scrollHeight; // Scroll to the bottom

    // Fetch the AI response
    const aiResponse = await fetchGroqData(userInput);

    // Convert bold markdown (**text**) to HTML (<strong>text</strong>)
    const formattedResponse = aiResponse.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');

    // Update typing div with AI response and PFP
      const aiResponseHTML = `
    <div class="flex items-start space-x-2 mt-4">
        ${getBotPfp()} <!-- Function to insert PFP -->
        <div class="bg-purple-200 text-black leading-6 mb-3 font-sans transition-all duration-300 ease-in-out rounded-lg p-2">${formattedResponse}</div>
    </div>
    <div class="mt-2 flex items-center space-x-2">
        <button 
            class="flex items-center space-x-1 bg-white text-black px-2 py-1 rounded cursor-pointer"
            onclick="copyToClipboard('${aiResponse.replace(/'/g, "\\'")}')"
        >
            ${getCopySvg()} 
        </button>
        <button 
            class="flex items-center space-x-1 bg-white text-black px-2 py-1 rounded cursor-pointer"
            onclick="speakResponse('${aiResponse.replace(/'/g, "\\'")}')"
        >
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-md-heavy"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 4.9099C11 4.47485 10.4828 4.24734 10.1621 4.54132L6.67572 7.7372C6.49129 7.90626 6.25019 8.00005 6 8.00005H4C3.44772 8.00005 3 8.44776 3 9.00005V15C3 15.5523 3.44772 16 4 16H6C6.25019 16 6.49129 16.0938 6.67572 16.2629L10.1621 19.4588C10.4828 19.7527 11 19.5252 11 19.0902V4.9099ZM8.81069 3.06701C10.4142 1.59714 13 2.73463 13 4.9099V19.0902C13 21.2655 10.4142 22.403 8.81069 20.9331L5.61102 18H4C2.34315 18 1 16.6569 1 15V9.00005C1 7.34319 2.34315 6.00005 4 6.00005H5.61102L8.81069 3.06701ZM20.3166 6.35665C20.8019 6.09313 21.409 6.27296 21.6725 6.75833C22.5191 8.3176 22.9996 10.1042 22.9996 12.0001C22.9996 13.8507 22.5418 15.5974 21.7323 17.1302C21.4744 17.6185 20.8695 17.8054 20.3811 17.5475C19.8927 17.2896 19.7059 16.6846 19.9638 16.1962C20.6249 14.9444 20.9996 13.5175 20.9996 12.0001C20.9996 10.4458 20.6064 8.98627 19.9149 7.71262C19.6514 7.22726 19.8312 6.62017 20.3166 6.35665ZM15.7994 7.90049C16.241 7.5688 16.8679 7.65789 17.1995 8.09947C18.0156 9.18593 18.4996 10.5379 18.4996 12.0001C18.4996 13.3127 18.1094 14.5372 17.4385 15.5604C17.1357 16.0222 16.5158 16.1511 16.0539 15.8483C15.5921 15.5455 15.4632 14.9255 15.766 14.4637C16.2298 13.7564 16.4996 12.9113 16.4996 12.0001C16.4996 10.9859 16.1653 10.0526 15.6004 9.30063C15.2687 8.85905 15.3578 8.23218 15.7994 7.90049Z" fill="currentColor"></path></svg>
            
        </button>
    </div>
`;

    typingDiv.outerHTML = aiResponseHTML;
    chatContainer.scrollTop = chatContainer.scrollHeight; // Scroll to the bottom
    document.getElementById('user-input').value = ''; // Clear input field

    incrementRequestCount();
}

function getBotPfp() {
    return `
        <img 
            src="https://i.ibb.co/McjMCyJ/Leonardo-Phoenix-10-A-simple-and-professional-logo-for-an-AI-a-1-1.jpg" alt="Leonardo-Phoenix-10-A-simple-and-professional-logo-for-an-AI-a-1-1" 
            alt="AI Bot" 
            class="w-10 h-10 rounded-full"
        />
    `;
}

// Function to return the Copy SVG
function getCopySvg() {
    return `
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-md-heavy">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path>
        </svg>
    `;
}

// Function to copy text to clipboard
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
        // Show toast message
        const toast = document.getElementById('toast');
        toast.classList.remove('opacity-0', 'invisible');
        toast.classList.add('opacity-100', 'visible'); // Show the toast

        setTimeout(() => {
            toast.classList.remove('opacity-100', 'visible');
            toast.classList.add('opacity-0', 'invisible'); // Hide the toast after 3 seconds
        }, 3000);
    }).catch(err => {
        console.error('Failed to copy: ', err);
    });
}


// Toggle visibility of the emoji picker
function toggleEmojiPicker() {
    const emojiPicker = document.getElementById('emoji-picker');
    // Toggle the display of the emoji picker
    if (emojiPicker.style.display === 'none' || emojiPicker.style.display === '') {
        emojiPicker.style.display = 'block'; // Show the picker
    } else {
        emojiPicker.style.display = 'none'; // Hide the picker
    }
}

// Add selected emoji to the input field
function addEmoji(emoji) {
    const userInput = document.getElementById('user-input');
    userInput.value += emoji; // Append the emoji to the input field

    // Optionally, you can close the picker after selecting an emoji
    toggleEmojiPicker();
}

function showErrorMessage(message) {
    const errorMessageElement = document.getElementById('error-message');
    errorMessageElement.textContent = message;
    errorMessageElement.style.display = 'block';
    setTimeout(() => {
        errorMessageElement.style.display = 'none';
    }, 5000); // Hide the error message after 5 seconds
}
function speakResponse(text) {
    // Create the utterance
    const utterance = new SpeechSynthesisUtterance(text);

    // Load voices asynchronously
    const loadVoices = () => {
        const voices = speechSynthesis.getVoices();

        // Choose the best available voice
        let bestVoice = voices.find(voice => voice.name.includes('Google US English')) || // Chrome
                        voices.find(voice => voice.name.includes('Microsoft Zira')) ||    // Edge
                        voices.find(voice => voice.name.includes('Siri')) ||             // Safari
                        voices.find(voice => voice.lang === 'en-US');                   // Fallback to any en-US voice

        if (bestVoice) {
            utterance.voice = bestVoice;
        }

        // Fine-tune speech properties
        utterance.pitch = 1.2; // Dynamic tone
        utterance.rate = 1.1;  // Slightly faster
        utterance.volume = 1;  // Maximum volume

        // Speak the utterance
        speechSynthesis.speak(utterance);
    };

    // Check if voices are already loaded
    if (speechSynthesis.getVoices().length) {
        loadVoices();
    } else {
        // Wait for voices to be loaded
        speechSynthesis.addEventListener('voiceschanged', loadVoices);
    }

    // Ensure speech synthesis only works after user interaction
    setTimeout(() => {
        if (speechSynthesis.speaking) {
            speechSynthesis.cancel(); // Stop any previous speech
        }
        speechSynthesis.speak(utterance); // Start new speech
    }, 100); // Delay to ensure voices are properly loaded
}

    </script>
</body>
</html>
